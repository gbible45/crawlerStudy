## 01. 증권 거래 상위 크롤링
```python
#-*- coding: utf-8 -*-

# 라이브러리 import
try:
    import requests
except:
    !pip install requests
    import requests

try:
    from bs4 import BeautifulSoup
except:
    !pip install beautifulsoup4
    from bs4 import BeautifulSoup

import time

```
```python
# requests and BeautifulSoup 받아오는 함수
def getRequestSoup (url):
    headers = {
        'Content-Type': 'application/json; charset=utf-8',
        'user-agen': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36'
    }
    response = requests.get(url, headers=headers)
    soup = BeautifulSoup(response.text, 'html.parser')
    return soup
```
```python
# 추출 시작
def start() :
    # BeautifulSoup 받아오기
    soup = getRequestSoup("https://finance.naver.com/sise/sise_quant.nhn")
    # 데이터가 들어있는 테이블 Tr 추출
    data_trs = soup.select("div.box_type_l table.type_2 > tr")
    if len(data_trs) > 1 :
        # Tr 시작 2 부터
        for data_tr in data_trs[2:] :
            data_tds = data_tr.select('td')
            # 데이터가 있는 부분만..
            if len(data_tds) > 5 :
                no = data_tds[0].text.strip()
                herfTag = data_tds[1].select('a')[0]
                href = herfTag.attrs['href']
                code = href[href.find('code=') + 5:]
                name = herfTag.text.strip()
                price = data_tds[2].text.strip().replace(",", "")
                parcent = data_tds[4].select('span')[0].text.strip().replace("%", "")
                volume = data_tds[5].text.strip().replace(",", "")
                amount = data_tds[6].text.strip().replace(",", "")
                cap = data_tds[9].text.strip().replace(",", "")
                per = data_tds[10].text.strip().replace(",", "")
                poe = data_tds[11].text.strip().replace(",", "")
                data = {"no": no, "code": code, "name": name, "price": price, "parcent": parcent, "volume": volume, "amount": amount, "cap": cap, "per": per, "poe": poe}

                print (data)

```
```python
start()
```
